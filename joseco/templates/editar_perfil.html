{% extends 'base.html' %}
{% load static %}

{% block extra_css %}
  <link rel="stylesheet" href="{% static 'css/registro.css' %}">
  <link rel="stylesheet" href="{% static 'css/estilosbase.css' %}">
{% endblock extra_css %}

{% block content %}
<div class="form-container mt-5">
    <h2>Editar Perfil</h2>

    <!-- Mostrar errores generales sobre el formulario -->
    {% if form.non_field_errors %}
        <div class="alert alert-danger" style="margin-bottom: 20px; border-radius: 4px; background-color: #f8d7da; color: #721c24; padding: 10px;">
            {{ form.non_field_errors|join:"<br>"|safe }}
        </div>
    {% endif %}

    <!-- Mostrar mensajes de Django -->
    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-info" style="margin-bottom: 20px; border-radius: 4px; background-color: #e9ecef; color: #495057; padding: 10px;">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}

    <form method="POST" autocomplete="off">
        {% csrf_token %}

        <div class="form-group">
            <label for="first_name">Nombre</label>
            {{ form.first_name.errors|join:"<br>"|safe }}
            {{ form.first_name }}
        </div>

        <div class="form-group">
            <label for="last_name">Apellidos</label>
            {{ form.last_name.errors|join:"<br>"|safe }}
            {{ form.last_name }}
        </div>

        <div class="form-group">
            <label for="email">Correo Electrónico</label>
            {{ form.email.errors|join:"<br>"|safe }}
            {{ form.email }}
        </div>

        <button type="submit" class="btn btn-primary w-100">Guardar Cambios</button>
    </form>
    <form method="POST" action="{% url 'eliminar_cuenta' %}" onsubmit="return confirm('¿Estás seguro de que deseas eliminar tu cuenta? Esta acción no se puede deshacer.');">
        {% csrf_token %}
        <button type="submit" class="btn btn-danger w-100 mt-3">Eliminar Cuenta</button>
    </form>
</div>
{% endblock content %}
